<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotspot Alignment Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #1a1a2e; 
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: monospace;
            color: #fff;
        }
        h1 { margin: 10px 0; }
        .scene-selector {
            margin: 10px;
            padding: 10px;
            background: #333;
            border-radius: 5px;
        }
        .scene-selector button {
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
            background: #4a4a4a;
            color: #fff;
            border: none;
            border-radius: 5px;
        }
        .scene-selector button:hover, .scene-selector button.active {
            background: #00ff88;
            color: #000;
        }
        .scene-wrapper {
            position: relative;
            width: 1920px;
            height: 1080px;
            max-width: 100vw;
            max-height: calc(100vw * 9 / 16);
        }
        .scene-bg {
            width: 100%;
            height: 100%;
            object-fit: fill;
        }
        .hotspots-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .hotspot {
            position: absolute;
            border: 2px dashed red;
            background: rgba(255, 0, 0, 0.2);
            font-size: 10px;
            color: yellow;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 1px 1px black;
            overflow: hidden;
        }
        .hotspot:hover {
            background: rgba(0, 255, 0, 0.3);
            border-color: lime;
        }
        .info {
            padding: 10px;
            background: #333;
            max-width: 1920px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Hotspot Alignment Test</h1>
    <div class="scene-selector">
        <button onclick="loadScene('home')" id="btn-home" class="active">Home</button>
        <button onclick="loadScene('mancave')" id="btn-mancave">Mancave</button>
        <button onclick="loadScene('garden')" id="btn-garden">Garden</button>
        <button onclick="loadScene('klooster')" id="btn-klooster">Klooster</button>
        <button onclick="loadScene('facility')" id="btn-facility">Facility</button>
    </div>
    <div class="info">
        <p>SVG ViewBox: 1920x1080 | Hover over hotspots to see coordinates</p>
    </div>
    <div class="scene-wrapper">
        <img class="scene-bg" id="scene-bg" src="assets/images/scenes/home.svg" alt="Scene">
        <div class="hotspots-layer" id="hotspots"></div>
    </div>
    
    <script>
        // Pixel-perfect hotspots calculated from SVG coordinates
        // Formula: percentage = (pixel / viewBox) * 100
        
        const scenes = {
            home: {
                bg: 'assets/images/scenes/home.svg',
                hotspots: [
                    {
                        id: 'window',
                        name: 'Kitchen Window',
                        // SVG: translate(500, 120), outer frame x=-15, y=-15, w=430, h=380
                        x: (485 / 1920) * 100,    // 25.26%
                        y: (105 / 1080) * 100,    // 9.72%
                        width: (430 / 1920) * 100, // 22.40%
                        height: (380 / 1080) * 100 // 35.19%
                    },
                    {
                        id: 'clock',
                        name: 'Wall Clock',
                        // SVG: translate(350, 150), circle r=50
                        x: (300 / 1920) * 100,    // 15.63%
                        y: (100 / 1080) * 100,    // 9.26%
                        width: (100 / 1920) * 100, // 5.21%
                        height: (100 / 1080) * 100 // 9.26%
                    },
                    {
                        id: 'espresso-machine',
                        name: 'Espresso Machine',
                        // SVG: translate(1200, 380), rect width=140, height=120
                        x: (1200 / 1920) * 100,   // 62.5%
                        y: (380 / 1080) * 100,    // 35.19%
                        width: (140 / 1920) * 100, // 7.29%
                        height: (120 / 1080) * 100 // 11.11%
                    },
                    {
                        id: 'door-mancave',
                        name: 'Door to Mancave',
                        // SVG: translate(1700, 200), rect x=-10, y=-10, w=180, h=570
                        x: (1690 / 1920) * 100,   // 88.02%
                        y: (190 / 1080) * 100,    // 17.59%
                        width: (180 / 1920) * 100, // 9.38%
                        height: (570 / 1080) * 100 // 52.78%
                    },
                    {
                        id: 'door-garden',
                        name: 'Back Door (Garden)',
                        // SVG: translate(50, 200), rect x=-10, y=-10, w=180, h=570
                        x: (40 / 1920) * 100,     // 2.08%
                        y: (190 / 1080) * 100,    // 17.59%
                        width: (180 / 1920) * 100, // 9.38%
                        height: (570 / 1080) * 100 // 52.78%
                    },
                    {
                        id: 'counter',
                        name: 'Kitchen Counter',
                        // SVG: rect x=1050, y=500, width=520, height=250
                        x: (1050 / 1920) * 100,   // 54.69%
                        y: (500 / 1080) * 100,    // 46.30%
                        width: (520 / 1920) * 100, // 27.08%
                        height: (250 / 1080) * 100 // 23.15%
                    },
                    {
                        id: 'cabinets',
                        name: 'Upper Cabinets',
                        // SVG: translate(1100, 100), total width ~420, height=280
                        x: (1100 / 1920) * 100,   // 57.29%
                        y: (100 / 1080) * 100,    // 9.26%
                        width: (420 / 1920) * 100, // 21.88%
                        height: (280 / 1080) * 100 // 25.93%
                    }
                ]
            },
            mancave: {
                bg: 'assets/images/scenes/mancave.svg',
                hotspots: [
                    {
                        id: 'sstv-terminal',
                        name: 'SSTV Terminal',
                        x: (530 / 1920) * 100,
                        y: (430 / 1080) * 100,
                        width: (340 / 1920) * 100,
                        height: (240 / 1080) * 100
                    },
                    {
                        id: 'laptop',
                        name: 'Laptop',
                        x: (235 / 1920) * 100,
                        y: (455 / 1080) * 100,
                        width: (230 / 1920) * 100,
                        height: (180 / 1080) * 100
                    },
                    {
                        id: 'hackrf',
                        name: 'HackRF',
                        x: (1200 / 1920) * 100,
                        y: (530 / 1080) * 100,
                        width: (150 / 1920) * 100,
                        height: (80 / 1080) * 100
                    },
                    {
                        id: 'flipper-zero',
                        name: 'Flipper Zero',
                        x: (1200 / 1920) * 100,
                        y: (650 / 1080) * 100,
                        width: (100 / 1920) * 100,
                        height: (50 / 1080) * 100
                    },
                    {
                        id: 'server-rack',
                        name: 'Server Rack',
                        x: (1650 / 1920) * 100,
                        y: (200 / 1080) * 100,
                        width: (200 / 1920) * 100,
                        height: (600 / 1080) * 100
                    },
                    {
                        id: 'meshtastic',
                        name: 'Meshtastic',
                        x: (1380 / 1920) * 100,
                        y: (600 / 1080) * 100,
                        width: (80 / 1920) * 100,
                        height: (120 / 1080) * 100
                    },
                    {
                        id: 'door-house',
                        name: 'Door to House',
                        x: (30 / 1920) * 100,
                        y: (250 / 1080) * 100,
                        width: (140 / 1920) * 100,
                        height: (500 / 1080) * 100
                    }
                ]
            },
            garden: {
                bg: 'assets/images/scenes/garden.svg',
                hotspots: [
                    {
                        id: 'wind-turbines',
                        name: 'Wind Turbines',
                        x: (795 / 1920) * 100,
                        y: (100 / 1080) * 100,
                        width: (311 / 1920) * 100,
                        height: (360 / 1080) * 100
                    },
                    {
                        id: 'antenna',
                        name: 'Antenna',
                        x: (90 / 1920) * 100,
                        y: (130 / 1080) * 100,
                        width: (120 / 1920) * 100,
                        height: (150 / 1080) * 100
                    },
                    {
                        id: 'flower-beds',
                        name: 'Flower Beds',
                        x: (430 / 1920) * 100,
                        y: (460 / 1080) * 100,
                        width: (520 / 1920) * 100,
                        height: (110 / 1080) * 100
                    },
                    {
                        id: 'shed',
                        name: 'Shed',
                        x: (1500 / 1920) * 100,
                        y: (380 / 1080) * 100,
                        width: (200 / 1920) * 100,
                        height: (250 / 1080) * 100
                    },
                    {
                        id: 'bench',
                        name: 'Bench',
                        x: (1000 / 1920) * 100,
                        y: (580 / 1080) * 100,
                        width: (150 / 1920) * 100,
                        height: (80 / 1080) * 100
                    },
                    {
                        id: 'tree',
                        name: 'Tree',
                        x: (1580 / 1920) * 100,
                        y: (200 / 1080) * 100,
                        width: (240 / 1920) * 100,
                        height: (350 / 1080) * 100
                    },
                    {
                        id: 'house-back',
                        name: 'Farmhouse',
                        x: (50 / 1920) * 100,
                        y: (270 / 1080) * 100,
                        width: (350 / 1920) * 100,
                        height: (280 / 1080) * 100
                    },
                    {
                        id: 'door-house',
                        name: 'Back Door',
                        x: (300 / 1920) * 100,
                        y: (450 / 1080) * 100,
                        width: (80 / 1920) * 100,
                        height: (200 / 1080) * 100
                    }
                ]
            },
            klooster: {
                bg: 'assets/images/scenes/klooster.svg',
                hotspots: [
                    {
                        id: 'entrance',
                        name: 'Entrance',
                        x: (500 / 1920) * 100,
                        y: (400 / 1080) * 100,
                        width: (150 / 1920) * 100,
                        height: (250 / 1080) * 100
                    },
                    {
                        id: 'courtyard',
                        name: 'Courtyard',
                        x: (100 / 1920) * 100,
                        y: (700 / 1080) * 100,
                        width: (950 / 1920) * 100,
                        height: (270 / 1080) * 100
                    },
                    {
                        id: 'garden',
                        name: 'Hedge Garden',
                        x: (1100 / 1920) * 100,
                        y: (450 / 1080) * 100,
                        width: (300 / 1920) * 100,
                        height: (350 / 1080) * 100
                    },
                    {
                        id: 'well',
                        name: 'Well',
                        x: (400 / 1920) * 100,
                        y: (680 / 1080) * 100,
                        width: (150 / 1920) * 100,
                        height: (150 / 1080) * 100
                    },
                    {
                        id: 'bench',
                        name: 'Bench',
                        x: (600 / 1920) * 100,
                        y: (850 / 1080) * 100,
                        width: (180 / 1920) * 100,
                        height: (65 / 1080) * 100
                    },
                    {
                        id: 'parking',
                        name: 'Parking',
                        x: (1450 / 1920) * 100,
                        y: (700 / 1080) * 100,
                        width: (400 / 1920) * 100,
                        height: (300 / 1080) * 100
                    },
                    {
                        id: 'tower',
                        name: 'Tower',
                        x: (450 / 1920) * 100,
                        y: (0 / 1080) * 100,
                        width: (250 / 1920) * 100,
                        height: (400 / 1080) * 100
                    },
                    {
                        id: 'moon',
                        name: 'Moon',
                        x: (1570 / 1920) * 100,
                        y: (70 / 1080) * 100,
                        width: (160 / 1920) * 100,
                        height: (160 / 1080) * 100
                    }
                ]
            },
            facility: {
                bg: 'assets/images/scenes/facility.svg',
                hotspots: [
                    {
                        id: 'main-building',
                        name: 'Main Building',
                        x: (600 / 1920) * 100,
                        y: (120 / 1080) * 100,
                        width: (600 / 1920) * 100,
                        height: (440 / 1080) * 100
                    },
                    {
                        id: 'fence',
                        name: 'Fence',
                        x: (0 / 1920) * 100,
                        y: (550 / 1080) * 100,
                        width: (1920 / 1920) * 100,
                        height: (150 / 1080) * 100
                    },
                    {
                        id: 'camera',
                        name: 'Camera',
                        x: (330 / 1920) * 100,
                        y: (485 / 1080) * 100,
                        width: (50 / 1920) * 100,
                        height: (55 / 1080) * 100
                    },
                    {
                        id: 'guard-tower',
                        name: 'Guard Tower',
                        x: (50 / 1920) * 100,
                        y: (350 / 1080) * 100,
                        width: (100 / 1920) * 100,
                        height: (350 / 1080) * 100
                    },
                    {
                        id: 'radar',
                        name: 'Radar',
                        x: (150 / 1920) * 100,
                        y: (180 / 1080) * 100,
                        width: (120 / 1920) * 100,
                        height: (370 / 1080) * 100
                    },
                    {
                        id: 'hangar',
                        name: 'Hangar',
                        x: (1300 / 1920) * 100,
                        y: (250 / 1080) * 100,
                        width: (300 / 1920) * 100,
                        height: (300 / 1080) * 100
                    },
                    {
                        id: 'control-panel',
                        name: 'Control Panel',
                        x: (1080 / 1920) * 100,
                        y: (600 / 1080) * 100,
                        width: (80 / 1920) * 100,
                        height: (150 / 1080) * 100
                    },
                    {
                        id: 'gate',
                        name: 'Gate',
                        x: (830 / 1920) * 100,
                        y: (550 / 1080) * 100,
                        width: (250 / 1920) * 100,
                        height: (200 / 1080) * 100
                    },
                    {
                        id: 'comm-tower',
                        name: 'Comm Tower',
                        x: (1650 / 1920) * 100,
                        y: (100 / 1080) * 100,
                        width: (100 / 1920) * 100,
                        height: (500 / 1080) * 100
                    }
                ]
            }
        };
        
        function loadScene(sceneName) {
            const scene = scenes[sceneName];
            document.getElementById('scene-bg').src = scene.bg;
            const container = document.getElementById('hotspots');
            container.innerHTML = '';
            
            // Update buttons
            document.querySelectorAll('.scene-selector button').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + sceneName).classList.add('active');
            
            scene.hotspots.forEach(h => {
                const div = document.createElement('div');
                div.className = 'hotspot';
                div.style.left = h.x + '%';
                div.style.top = h.y + '%';
                div.style.width = h.width + '%';
                div.style.height = h.height + '%';
                div.textContent = h.name;
                div.title = `${h.id}: x=${h.x.toFixed(2)}%, y=${h.y.toFixed(2)}%, w=${h.width.toFixed(2)}%, h=${h.height.toFixed(2)}%`;
                container.appendChild(div);
            });
            
            console.log(`Loaded ${sceneName} with ${scene.hotspots.length} hotspots`);
        }
        
        // Initial load
        loadScene('home');
    </script>
</body>
</html>
