<html lang=”en”>
	<head>
    		<meta charset="utf-8">
    		<meta http-equiv="x-ua-compatible" content="ie=edge">
    		<meta name="viewport" content="width=device-width, initial-scale=1">    <!-- Name of your awesome camera app -->
    		<title>Camera App</title>    <!-- Link to your main style sheet-->
    		<style>
    			html, body{
			  margin: 0;
			  padding: 0;
			  height: 100%;
			  width: 100%;
			  background:black;
			}
			#camera, #camera--view, #camera--sensor, #camera--output{
			    position: fixed;
			    height: 100%;
			    width: 100%;
			    object-fit: cover;
			   
			}
			
			#camera--view {  opacity:0.3; }
			#camera--view, #camera--sensor, #camera--output{
			    //transform: scaleX(-1);
			    //filter: FlipH;
			}
			#camera--trigger{
			    width: 200px;
			    background-color: black;
			    color: white;
			    font-size: 16px;
			    border-radius: 30px;
			    border: none;
			    padding: 15px 20px;
			    text-align: center;
			    box-shadow: 0 5px 10px 0 rgba(0,0,0,0.2);
			    position: fixed;
			    bottom: 30px;
			    left: calc(50% - 100px);
			}
			.taken{
			    height: 100px!important;
			    width: 100px!important;
			    transition: all 0.5s ease-in;
			    border: solid 3px white;
			    box-shadow: 0 5px 10px 0 rgba(0,0,0,0.2);
			    top: 20px;
			    right: 20px;
			    z-index: 2;
			}
    		</style>
	</head>
	<body>    <!-- Camera -->
    		<main id="camera">        <!-- Camera sensor -->
        		<canvas id="camera--sensor"></canvas>        			<!-- Camera view -->
        		<video id="camera--view" autoplay playsinline></video>        	<!-- Camera output -->
        		<img src="//:0" alt="" id="camera--output">        		<!-- Camera trigger -->
        		<button id="camera--trigger">Take a picture</button>    
        	</main>    
        	<!-- Reference to your JavaScript file -->
    		<script type="text/javascript">
	    		// Set constraints for the video stream
			var constraints   = { video: { facingMode: "user" }, audio: false };// Define constants
			const cameraView  = document.querySelector("#camera--view"),
			    cameraOutput  = document.querySelector("#camera--output"),
			    cameraSensor  = document.querySelector("#camera--sensor"),
			    cameraTrigger = document.querySelector("#camera--trigger")// Access the device camera and stream to cameraView
			function cameraStart() {
			    navigator.mediaDevices
				.getUserMedia(constraints)
				.then(function(stream) {
				track = stream.getTracks()[0];
				cameraView.srcObject = stream;
			    })
			    .catch(function(error) {
				console.error("Oops. Something is broken.", error);
			    });
			}// Take a picture when cameraTrigger is tapped
			cameraTrigger.onclick = function() {
			    cameraSensor.width = cameraView.videoWidth;
			    cameraSensor.height = cameraView.videoHeight;
			    cameraView.style.opacity=0.5; //globalAlpha = 0.3;
			    cameraSensor.getContext("2d").drawImage(cameraView, 0, 0);
			    cameraOutput.src = cameraSensor.toDataURL("image/webp");
			    cameraOutput.classList.add("taken");
			};// Start the video stream when the window loads
			window.addEventListener("load", cameraStart, false);
    		</script>
    		
    		<script language="javascript">
		var c = document.getElementById("camera--sensor");
			var ctx = c.getContext("2d");

			//making the canvas full screen
			c.height = window.innerHeight;
			c.width = window.innerWidth;

			//chinese characters - taken from the unicode charset
			var chinese = "01234567890ABCDEF";
			//converting the string into an array of single characters
			chinese = chinese.split("");

			var font_size = c.width/80;
			var columns = c.width/font_size; //number of columns for the rain
			//an array of drops - one per column
			var drops = [];
			var x=0;
			var iteration=0;
			var y=10;
			var dx=1;
			var status=0;
			var dy=1;
			var step=0;
			//x below is the x coordinate
			//1 = y co-ordinate of the drop(same for every drop initially)
			for(var x = 0; x < columns; x++)
				drops[x] = 1;


			function plotSine(ctx,xs,amplitude,frequency,color) {
			    var width = ctx.canvas.width;
			    var height = ctx.canvas.height;
			    var scale = 20;
			    ctx.beginPath();
			    ctx.lineWidth = 2;
			    ctx.strokeStyle = color;
			    
			    
			    y = (height/2) + amplitude * Math.sin((90-xs));
			    var x1=(width/2)+ amplitude * Math.sin((90+xs));
			    ctx.lineTo(x1, y);
			    
			    y = (height/2) + amplitude * Math.sin((90-(xs+1)));
			    var x1=(width/2)+ amplitude * Math.sin((90+(xs+1)));
			    ctx.lineTo(x1, y);
			    ctx.stroke();
			
			}



			function drawSine(iteration) {
			    var canvas = document.getElementById("camera--sensor");
			    var context = canvas.getContext("2d");

			    //context.clearRect(0, 0, 500, 500);
			    //showAxes(context);
			    context.save();            
			    
			    plotSine(context, iteration,  context.canvas.height-iteration,context.canvas.width*0.5,"rgb(0,0,255)");
			    plotSine(context, 45+iteration, context.canvas.height-iteration,context.canvas.width*0.5,"rgb(255,0,0)");
			    plotSine(context, 90+iteration, context.canvas.height-iteration,context.canvas.width*0.5,"rgb(0,255,0)");
			     plotSine(context, 135+iteration, context.canvas.height-iteration,context.canvas.width*0.5,"rgb(0,0,0)");
			    //plotSine(context, iteration, context.canvas.height/2,context.canvas.width/4,"rgb(0,255,255)");
			    //plotSine(context, iteration, context.canvas.height/2,context.canvas.width/5,"rgb(255,255,0)");
			    //plotSine(context, iteration, context.canvas.height/2,context.canvas.width/6,"rgb(255,0,255)");
			    context.restore();
			    
			    
			   
			}


			//drawing the characters
			function draw()
			{
				iteration=iteration+1; x=x+1;
				ctx.globalAlpha = 0.9;
				//Black BG for the canvas
				//translucent BG to show trail
				ctx.fillStyle = "rgba(0, 0, 0, 0.01)";
				ctx.fillRect(0, 0, c.width, c.height);

				ctx.fillStyle = "#0a0"; //green text
				var font_siz=font_size*1;
				ctx.font = font_siz + "px arial";
				ctx.fillText("R",font_siz,font_siz*2);
				ctx.fillText("3",font_siz*2,font_siz*2);
				ctx.fillText("1",font_siz*3,font_siz*2);
				ctx.fillText("N",font_siz*4,font_siz*2);
				ctx.fillText("'s",font_siz*5,font_siz*2);
				ctx.fillText("C",font_siz*7,font_siz*2);
				ctx.fillText("Y",font_siz*8,font_siz*2);
				ctx.fillText("B",font_siz*9,font_siz*2);
				ctx.fillText("E",font_siz*10,font_siz*2);
				ctx.fillText("R",font_siz*11,font_siz*2);
				ctx.fillText("S",font_siz*12,font_siz*2);
				ctx.fillText("P",font_siz*13,font_siz*2);
				ctx.fillText("A",font_siz*14,font_siz*2);
				ctx.fillText("C",font_siz*15,font_siz*2);
				ctx.fillText("E",font_siz*16,font_siz*2);
				ctx.fillText("P",font_siz*17,font_siz*2);
				ctx.fillText("L",font_siz*18,font_siz*2);
				ctx.fillText("A",font_siz*19,font_siz*2);
				ctx.fillText("C",font_siz*20,font_siz*2);
				ctx.fillText("E",font_siz*21,font_siz*2);
				ctx.fillStyle = "#080"; //green text
				ctx.font = font_size + "px arial";
				
				
				
				
				drawSine(x);
				window.requestAnimationFrame(draw);

			}

			setInterval(draw, 100);



	</script>
	
    	</body>
</html>
